{{ define "main" }}
<section class="posts">
  {{ $groups := .Pages.GroupByDate "2006" }}
  {{ if not (len $groups) }}
    <p>No posts found.</p>
  {{ end }}

  {{ range $groups }}
    <h2 class="year">{{ .Key }}</h2>
    <ul class="posts-year">
      {{ $pages := .Pages.ByDate }} {{/* sort pages by date (ascending) */}}
      {{ range $pages.Reverse }} {{/* iterate newest-first */}}
        <li class="post-item">
          {{ $d := .Date }}
          <time datetime="{{ $d.Format "2006-01-02T15:04:05Z07:00" }}">{{ $d.Format "Jan 2" }}</time>
          <a href="{{ .RelPermalink }}">
            {{ if .LinkTitle }}{{ .LinkTitle }}{{ else }}{{ .Title }}{{ end }}
          </a>

          {{ with .Summary }}
            <p class="summary">{{ . }}</p>
          {{ end }}

          {{ with .Params.tags }}
            <p class="tags">
              {{ range . }}<span class="tag">#{{ . }}</span> {{ end }}
            </p>
          {{ end }}
        </li>
      {{ end }}
    </ul>
  {{ end }}
</section>
{{ end }}
